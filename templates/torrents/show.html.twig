{% extends 'base.html.twig' %}

{% block title %}{{ site_url}} : {{ torrent.title }}{% endblock %}

{% block body %}

<div class="row">
    <div class="col-sm mt-3">
        {% for cat in torrent.category %}
            <a class="btn btn-sm btn-outline-secondary text-decoration-none px-3 fw-bold" style="font-size: 0.75rem;" href="{{ path('categories_show', {'slug': cat.slug}) }}">
                <i class="fas fa-tags"></i> {{ cat.title }}
            </a>
        {% endfor %}
        {% for lic in torrent.licence %}
            <a class="btn btn-sm btn-outline-primary text-decoration-none px-3 fw-bold" style="font-size: 0.75rem;" href="{{ path('categories_show', {'slug': lic.slug}) }}">
                <i class="fas fa-file-alt"></i> {{ lic.title }}
            </a>
        {% endfor %}

        <h2 class="p-2 bg-light rounded mt-2 border-top border-bottom" data-toggle="tooltip" data-placement="top" title="Torrent hash: {{ torrent.hash }}">
            {{ torrent.title }}
        </h2>

        <p style="font-size: 0.8rem;">
            <span class="badge bg-success p-2 my-1">
                Seeders: 2
            </span>
            <span class="badge bg-danger p-2 my-1">
                Leechers: 2
            </span>
            <span class="badge bg-secondary p-2 my-1">
                Completed: 2
            </span>
        </p>

        <p class="mt-3" style="text-align: justify;">
            <img src="../uploads/images/torrents/{{ torrent.image }}" alt="{{ torrent.title }}" class="img-fluid rounded float-start me-2 mt-1" style="max-height:175px;">
            {{ torrent.content | raw }}
        </p>

        <p class="mt-5 py-2 border-top border-bottom" style="font-size: 0.8rem;">
            <span class="badge bg-primary p-2 my-1">
                <i class="fas fa-calendar-alt"></i> {{ torrent.date |format_datetime('medium', 'short', '', 'Europe/Paris', locale='fr') }}
            </span>
            <span class="badge bg-primary p-2 my-1">
                <i class="fas fa-user"></i> {{ torrent.author }}
            </span>
            <span class="badge bg-primary p-2 my-1">
                Taille : {{ torrent.size | readable_filesize }}
            </span>
            <span class="badge bg-primary p-2 my-1">
                Lectures : {{ torrent.views }}
            </span>
            <span class="badge bg-primary p-2 my-1">
                Commentaires : 1
            </span>
            <span class="badge bg-secondary p-2 my-1">
                Nb de fichiers : 2
            </span>
            <span class="badge bg-secondary p-2 my-1">
                <a class="text-white text-decoration-none" href="../uploads/torrentfiles/{{ torrent.torrentFile }}" data-bs-toggle="tooltip" data-bs-placement="top" title="{{ torrent.torrentFile }}">Fichier torrent</a>
            </span>

            <select style="font-size: 0.7rem;">
                <option value="">Fichiers du torrent</option>
                <option value="">loremipsum-dff.mp4</option>
                <option value="">nemedine125.nfo</option>
            </select>
        </p>

        {% if app.user %}
            {% if (app.user.username == torrent.author) or (is_granted('ROLE_ADMIN')) %}
                <table>
                    <tr>
                        <td>
                            <a class="btn btn-sm btn-warning me-2" href="{{ path('torrents_edit', {'id': torrent.id}) }}"><i class="fas fa-edit"></i> Modifier</a>
                        </td>
                        <td>
                            {{ include('torrents/_delete_form.html.twig') }}
                        </td>
                    </tr>
                </table>
            {% endif %}
        {% endif %}

    </div>

    {% block sidebar %}
        {{ sidebar() }}
    {% endblock %}
</div>

{% endblock %}
